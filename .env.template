# ==============================================================================
# VoIPBin Sandbox - Environment Configuration Template
# ==============================================================================
# Copy this file to .env and configure the values appropriately.
# Variables marked with (REQUIRED) must be set for the system to work.
# Variables marked with (OPTIONAL) have sensible defaults.
# ==============================================================================

# ==============================================================================
# Google Cloud Platform (REQUIRED for TTS, storage, and AI features)
# ==============================================================================
GOOGLE_APPLICATION_CREDENTIALS=/path/to/your/google_service_account.json
GCP_PROJECT_ID=your-gcp-project-id
GCP_BUCKET_NAME_TMP=your-gcp-bucket-name-tmp
GCP_BUCKET_NAME_MEDIA=your-gcp-bucket-name-media

# ==============================================================================
# API SSL Certificates (REQUIRED for HTTPS API access)
# ==============================================================================
# Base64-encoded SSL certificate and private key for the API manager
# Generate with: cat cert.pem | base64 -w0
API_SSL_CERT_BASE64=
API_SSL_PRIVKEY_BASE64=

# Base64-encoded SSL certificate and private key for webhook/hook manager
HOOK_SSL_CERT_BASE64=
HOOK_SSL_PRIVKEY_BASE64=

# ==============================================================================
# SIP/VoIP Network Configuration (OPTIONAL - defaults work for local dev)
# ==============================================================================
# Base domain for SIP routing (default: voipbin.test)
BASE_DOMAIN=voipbin.test

# Host's external IP (your LAN IP, auto-detected by init.sh)
HOST_EXTERNAL_IP=127.0.0.1

# Kamailio's dedicated external IP (MUST differ from HOST_EXTERNAL_IP to avoid SIP loop detection)
# Auto-generated by init.sh - finds an available IP in your subnet
KAMAILIO_EXTERNAL_IP=127.0.0.1

# RTPEngine's dedicated external IP for RTP media traffic
# Auto-generated by init.sh - finds an available IP in your subnet
RTPENGINE_EXTERNAL_IP=127.0.0.1

# Internal addresses for host-mode services (Kamailio, RTPEngine)
# These require running: sudo ./scripts/setup-voip-network.sh
# The script creates macvlan interfaces so host-mode services can bind to internal IPs:
#   - Kamailio:  10.100.0.200
#   - RTPEngine: 10.100.0.201
# These IPs are hardcoded in docker-compose.yml

# RTPEngine configuration
RTPENGINE_INTERFACE=any
RTPENGINE_PORT_MIN=20000
RTPENGINE_PORT_MAX=30000
RTPENGINE_LISTEN_HTTP=9101

# Domain names for extension and trunk registration
DOMAIN_NAME_EXTENSION=registrar.voipbin.test
DOMAIN_NAME_TRUNK=trunk.voipbin.test

# SIP TLS certificates path (optional, for TLS SIP)
CERTS_PATH=./certs

# ==============================================================================
# Telephony Providers (OPTIONAL - for PSTN functionality)
# ==============================================================================
# Twilio credentials for phone number provisioning
TWILIO_SID=
TWILIO_API_KEY=

# Telnyx credentials for phone numbers and messaging
TELNYX_API_KEY=
TELNYX_CONNECTION_ID=
TELNYX_PROFILE_ID=

# MessageBird for SMS
MESSAGEBIRD_API_KEY=

# ==============================================================================
# Email Providers (OPTIONAL - for email features)
# ==============================================================================
SENDGRID_API_KEY=
MAILGUN_API_KEY=

# ==============================================================================
# AI/ML Services (OPTIONAL - for AI assistant features)
# ==============================================================================
OPENAI_API_KEY=
CARTESIA_API_KEY=
ELEVENLABS_API_KEY=
DEEPGRAM_API_KEY=
XAI_API_KEY=

# ==============================================================================
# AWS (OPTIONAL - for transcription)
# ==============================================================================
AWS_ACCESS_KEY=
AWS_SECRET_KEY=

# ==============================================================================
# Security & Storage (OPTIONAL)
# ==============================================================================
# JWT key shared by api-manager and storage-manager (must be the same for token verification)
JWT_KEY=your-random-jwt-secret-key

# Email verification base URL (used by customer-manager)
EMAIL_VERIFY_BASE_URL=https://api.voipbin.test:8443

# ==============================================================================
# Analytics & Monitoring (OPTIONAL)
# ==============================================================================
# ClickHouse for event/timeline analytics
CLICKHOUSE_ADDRESS=
CLICKHOUSE_DATABASE=default

# Homer SIP capture server
HOMER_URI=
HOMER_API_ADDRESS=
HOMER_AUTH_TOKEN=
HOMER_WHITELIST=

# PSTN provider IPs whitelist (comma-separated)
# Defaults to HOST_EXTERNAL_IP so local PSTN-style calls work out of the box
# Add additional IPs separated by commas if needed
PSTN_WHITELIST_IPS=

# ==============================================================================
# RAG (OPTIONAL - for knowledge base features)
# ==============================================================================
GCS_BUCKET=
GCS_EMBEDDINGS_PATH=rag/embeddings.gob
RAG_DOCS_BASE_PATH=/app/docs
OPENAI_EMBEDDING_MODEL=text-embedding-3-small
RAG_LLM_MODEL=gpt-4o
RAG_TOP_K=5
RAG_CHUNK_MAX_TOKENS=800
